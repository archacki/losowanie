<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Losowanie</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'MedievalSharp', sans-serif;
      background: linear-gradient(to bottom, #0a1628 0%, #1a2a4a 50%, #2a3a5a 100%);
      color: #fff;
      text-align: center;
      padding: 50px;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
    }

    /* Efekt ≈õniegu */
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      font-size: 1em;
      pointer-events: none;
      z-index: 1;
      animation: fall linear infinite;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    @keyframes fall {
      to {
        transform: translateY(100vh);
      }
    }

    /* Zimowe ozdoby */
    .winter-decoration {
      position: fixed;
      pointer-events: none;
      z-index: 5;
    }

    .icicle {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 40px solid rgba(200, 230, 255, 0.7);
    }

    h1 {
      text-shadow: 0 0 20px rgba(135, 206, 250, 0.8), 0 0 30px rgba(135, 206, 250, 0.5);
      position: relative;
      z-index: 10;
    }

    .scroll-container {
      position: relative;
      width: 600px;
      height: 120px;
      margin: 0 auto;
      overflow: hidden;
      border: 3px solid #b8d4ff;
      border-radius: 10px;
      background: rgba(34, 34, 34, 0.9);
      box-shadow: 0 0 30px rgba(135, 206, 250, 0.5), inset 0 0 20px rgba(135, 206, 250, 0.2);
      z-index: 10;
    }

    .scroll-strip {
      display: flex;
      will-change: transform;
    }

    .name {
      flex: 0 0 120px;
      height: 120px;
      text-align: center;
      font-size: 15px;
      background: rgba(51, 51, 51, 0.9);
      border-right: 1px solid #555;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      word-wrap: break-word;
      white-space: normal;
    }

    .gold { color: gold; text-shadow: 0 0 10px gold; }
    .red { color: #ff6b6b; text-shadow: 0 0 10px #ff6b6b; }
    .pink { color: #ffb3d9; text-shadow: 0 0 10px #ffb3d9; }
    .violet { color: #c299ff; text-shadow: 0 0 10px #c299ff; }
    .blue { color: #87ceeb; text-shadow: 0 0 10px #87ceeb; }
    .white { color: white; text-shadow: 0 0 10px white; }

    .indicator {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 3px;
      background: linear-gradient(to bottom, #ff4444, #ff0000, #ff4444);
      transform: translateX(-50%);
      z-index: 10;
      box-shadow: 0 0 10px #ff0000;
    }

    #result {
      margin-top: 30px;
      font-size: 22px;
      color: #ffeb3b;
      display: none;
      text-shadow: 0 0 15px rgba(255, 235, 59, 0.8);
      position: relative;
      z-index: 10;
    }

    #result small {
      display: block;
      margin-top: 10px;
      font-size: 14px;
      color: #cce7ff;
    }

    button {
      margin-top: 30px;
      padding: 12px 28px;
      font-size: 18px;
      font-family: 'MedievalSharp', sans-serif;
      background: linear-gradient(to bottom, #e8f4ff, #b8d4ff);
      color: #000;
      border: 2px solid #87ceeb;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(135, 206, 250, 0.6);
      position: relative;
      z-index: 10;
      transition: all 0.3s;
    }

    button:hover {
      box-shadow: 0 0 30px rgba(135, 206, 250, 0.9);
      transform: translateY(-2px);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      box-shadow: none;
    }

    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 100;
    }

    #legend {
      margin-top: 50px;
      color: #cce7ff;
      text-align: left;
      padding-left: 20px;
      line-height: 1.8;
      position: relative;
      z-index: 10;
      background: rgba(10, 22, 40, 0.7);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(135, 206, 250, 0.3);
    }
  </style>
</head>
<body>

  <h1>‚ùÑÔ∏è Wylosuj godnego nastƒôpcƒô tronu! ‚ùÑÔ∏è</h1>

  <div class="scroll-container">
    <div class="scroll-strip" id="scroll-strip"></div>
    <div class="indicator"></div>
  </div>

  <button id="roll-btn">‚õÑ Wska≈º wybra≈Ñca! ‚õÑ</button>

  <div id="result"></div>

  <canvas class="confetti" id="confetti"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // Tworzenie ≈õniegu
    function createSnowflake() {
      const snowflake = document.createElement('div');
      snowflake.classList.add('snowflake');
      snowflake.innerHTML = '‚ùÑ';
      snowflake.style.left = Math.random() * 100 + 'vw';
      snowflake.style.animationDuration = Math.random() * 3 + 5 + 's';
      snowflake.style.opacity = Math.random();
      snowflake.style.fontSize = (Math.random() * 1 + 0.5) + 'em';
      document.body.appendChild(snowflake);

      setTimeout(() => {
        snowflake.remove();
      }, 8000);
    }

    // Generowanie ≈õniegu co 200ms
    setInterval(createSnowflake, 200);

    // Tworzenie sopli lodu na g√≥rze
    function createIcicles() {
      for (let i = 0; i < 15; i++) {
        const icicle = document.createElement('div');
        icicle.className = 'icicle winter-decoration';
        icicle.style.left = (i * 7) + '%';
        icicle.style.top = '0px';
        document.body.appendChild(icicle);
      }
    }
    createIcicles();

    const allNames = {
      gold: ["Albert Sadowski"],
      red: ["Jacek Rzewuski"],
      pink: ["Adrian Doma≈Ñski"],
      violet: ["Maciej Sputowski"],
      blue: ["Jan Biniek", "Mateusz Kubacki", "Adam DƒÖbrowski", "Jakub Archacki", "Anna Jurga", "Paulina Kustra", "Tomas Vesely"],
      white: ["Jakub Nowakowski", "Karol Patecki", "Dominik Jarecki", "Marcin Zi√≥≈Çkowski"]
    };

    const probabilities = [
      { rarity: "gold", chance: 0.1 },
      { rarity: "red", chance: 0.8 },
      { rarity: "pink", chance: 1.2 },
      { rarity: "violet", chance: 1.9 },
      { rarity: "blue", chance: 46 },
      { rarity: "white", chance: 55 }
    ];

    function getRandomRarity() {
      const rand = Math.random() * 100;
      let sum = 0;
      for (let i = 0; i < probabilities.length; i++) {
        sum += probabilities[i].chance;
        if (rand < sum) {
          return probabilities[i].rarity;
        }
      }
      return "white";
    }

    function getRandomPersonByRarity(rarity) {
      const list = allNames[rarity];
      return list[Math.floor(Math.random() * list.length)];
    }

    function populateNames() {
      const strip = document.getElementById("scroll-strip");
      strip.innerHTML = "";
      for (let i = 0; i < 150; i++) {
        const rarity = getRandomRarity();
        const name = getRandomPersonByRarity(rarity);
        const div = document.createElement("div");
        div.className = `name ${rarity}`;
        div.textContent = name;
        strip.appendChild(div);
      }
    }

    function reset() {
      const strip = document.getElementById("scroll-strip");
      strip.style.transform = "translateX(0px)";
      strip.innerHTML = "";
      document.getElementById("result").style.display = "none";
    }

    function startRoll() {
      const button = document.getElementById("roll-btn");
      button.disabled = true;
      button.textContent = "Wyrokujƒô...";

      reset();
      populateNames();



      const strip = document.getElementById("scroll-strip");
      const nameWidth = 120;
      const containerWidth = 600;
      const centerOffset = containerWidth / 2 - nameWidth / 2;
      const total = strip.children.length;
      const finalTargetIndex = Math.floor(Math.random() * total);
      const finalTargetOffset = finalTargetIndex * nameWidth;
      const stopOffset = finalTargetOffset - centerOffset;

      const totalDistance = stopOffset;
      const totalDuration = 15000;

      const stripAnimation = strip.animate([
        { transform: `translateX(0px)` },
        { transform: `translateX(-${totalDistance}px)` }
      ], {
        duration: totalDuration,
        easing: 'cubic-bezier(0.1, 1, 0.4, 1)',
        fill: 'forwards'
      });

      stripAnimation.onfinish = () => {

        const scrollContainer = document.querySelector(".scroll-container");
        const stripRect = strip.getBoundingClientRect();
        const containerRect = scrollContainer.getBoundingClientRect();
        const centerX = containerRect.left + containerRect.width / 2;

        let winner = null;
        for (const child of strip.children) {
          const childRect = child.getBoundingClientRect();
          if (childRect.left <= centerX && childRect.right >= centerX) {
            winner = child;
            break;
          }
        }

        const result = document.getElementById("result");
        if (winner) {
          result.innerHTML = `
            <span style="font-size: 30px; font-weight: bold; text-transform: uppercase;">
              üëë NASTƒòPCƒÑ TRONU PER≈ÅOWEGO KR√ìLESTWA ZOSTAJE <strong class="${winner.classList[1]}">${winner.textContent}</strong> ! üëë
            </span>
            <br>
            <span style="font-size: 16px; font-weight: normal;">
              <strong>Tu≈º po wschodzie s≈Ço≈Ñca w dniu 23 grudnia roku pa≈Ñskiego 2025 dostƒÖpi zaszczytu poprowadzenia wojsk przeciwko walecznym wykresom, a poddani jemu zwierzaƒá siƒô bƒôdƒÖ ze sprintowych cel√≥w osiƒÖgniƒôcia! Bywajcie!</strong>
            </span>
          `;
          result.style.display = "block";
          
          // Zimowe konfetti (niebiesko-bia≈Çe)
          confetti({
            particleCount: 150,
            spread: 120,
            origin: { y: 0.4 },
            colors: ['#ffffff', '#87ceeb', '#b8d4ff', '#e8f4ff']
          });
        } else {
          result.innerHTML = `‚ùì Nie uda≈Ço siƒô ustaliƒá zwyciƒôzcy.`;
          result.style.display = "block";
        }

        button.disabled = false;
        button.textContent = "‚õÑ Wska≈º ponownie! ‚õÑ";
      };
    }

    document.getElementById("roll-btn").addEventListener("click", startRoll);
  </script>

  <div id="legend">
    <h2>Legenda:</h2>
    <ul>
      <li>
        <span style="color: gold;">‚óè</span> <span style="color: gold;">Z≈Çoty - Obecny Per≈Çowy W≈Çadca oraz mistrz ceremonii losowania (0,1% szans)</span><br>
        <strong>Uczestnicy:</strong> Albert Sadowski
      </li>
      <li>
        <span style="color: #ff6b6b;">‚óè</span> <span style="color: #ff6b6b;">Czerwony - Ten, kt√≥ry obecnemu ber≈Ça i korony odstƒÖpi≈Ç (0,8% szans)</span><br>
        <strong>Uczestnicy:</strong> Jacek Rzewuski
      </li>
      <li>
        <span style="color: #ffb3d9;">‚óè</span> <span style="color: #ffb3d9;">R√≥≈ºowy - W≈Çadca, co przed miesiƒÖcem koronƒô dzier≈ºy≈Ç (1,2% szans)</span><br>
        <strong>Uczestnicy:</strong> Adrian Doma≈Ñski
      </li>
      <li>
        <span style="color: #c299ff;">‚óè</span> <span style="color: #c299ff;">Fioletowy - Koronowany w dawno≈õci, o kt√≥rym pamiƒôtajƒÖ tylko najstarsi mƒôdrcy (1,9% szans)</span><br>
        <strong>Uczestnicy:</strong> Maciej Sputowski
      </li>
      <li>
        <span style="color: #87ceeb;">‚óè</span> <span style="color: #87ceeb;">Niebieski - W≈Çadca sprzed minionych (dwumiesiƒôcznych) czas√≥w wraz z krajanami obecnego mi≈Ço≈õciwie nam panujƒÖcego (46% szans, 5,85% na osobƒô)</span><br>
        <strong>Uczestnicy:</strong> Jan Biniek, Mateusz Kubacki, Tomas Vesely, Paulina Kustra, Adam DƒÖbrowski, Jakub Archacki, Anna Jurga.
      </li>
      <li>
        <span style="color: white;">‚óè</span> <span style="color: white;">Bia≈Çy - Osta≈Çe posp√≥lstwo (55% szans, 13,75% na osobƒô)</span><br>
        <strong>Uczestnicy:</strong> Jakub Nowakowski, Karol Patecki, Dominik Jarecki, Marcin Zi√≥≈Çkowski.
      </li>
    </ul>
  </div>

  <p style="margin-top: 40px; font-size: 10px; color: #88b3cc; position: relative; z-index: 10;">
    v. 0.4.2 by Jakub Archacki & Chat GPT Company Sp. z o. o. ‚ùÑÔ∏è<br>
    Zimowa edycja - Uczestnicy zaktualizowani w dn. 25-11-2025
  </p>
</body>
